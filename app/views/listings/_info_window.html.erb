<div id="carousel-listing-map-<%=listing.id%>" class="carousel slide" data-ride="carousel">
  <div class="carousel-inner" role="listbox">

    <div class="carousel-item active">
      <%=cl_image_tag listing.photos.first.key, height: 150, width: 250, crop: :fill, class: 'd-block img-fluid'%>
    </div>

    <% listing.photos.slice(1..-1).each do |photo| %>
    <div class="carousel-item">
      <%=cl_image_tag photo.key, height: 150, width: 250, crop: :fill, class: 'd-block img-fluid'%>
    </div>
    <%end%>

  </div>
  <a class="carousel-control-prev" href="#carousel-listing-map-<%=listing.id%>" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carousel-listing-map-<%=listing.id%>" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>


<div id="star-rating">
  <% if listing.reviews.blank? %>
    <p class="info-icon"><i class="fas fa-question-circle"></i>This listing hasn't been rated yet</p>
  <% else %>
    <div class="star-rating-wrapper">
      <div class="stars">
        <% render_stars(listing.reviews.average(:rating)).each do |star| %>
          <%= image_tag(star, width: '14') %>
        <%end%>
      </div>
      <p class="average-rating"><span><%=listing.reviews.average(:rating)%></span> (<%=listing.reviews.count%>)</p>
    </div>
  <% end %>
</div>


<div class="map-card-info">
  <%= link_to listing_path(listing.id) do  %>
    <p class="title-map-card"><%= listing.title %></p>
  <%end%>
  <p class="price-map-card"><i class="fas fa-pound-sign"></i><%= listing.price_per_day %> <span>per day</span></p>
</div>





